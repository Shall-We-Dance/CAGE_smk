# workflow/config.yaml
# CAGE-seq Snakemake configuration

genome: dm6   # genome label for reporting/logging

# Read type: default single-end for CAGE-seq
read_type: "SE"  # SE or PE

threads:
  fastp: 8
  star: 16
  samtools: 8
  deeptools: 8

# Reference & index
reference:
  star_index: "/path/to/genome/star_index"
  chrom_sizes: "/path/to/genome/dm6.chrom.sizes"
  fasta: "/path/to/genome.fa"

# Blacklist (manual)
# Boyle-Lab blacklist repository (examples):
#   https://github.com/Boyle-Lab/Blacklist
#   https://github.com/Boyle-Lab/Blacklist/tree/master/lists
blacklist:
  cache_dir: "resources/blacklist"
  # Provide exactly one of the following:
  # path: "/path/to/custom.blacklist.bed"
  # url: "https://raw.githubusercontent.com/Boyle-Lab/Blacklist/master/lists/dm6-blacklist.v2.bed.gz"

# Enable blacklist filtering (requires blacklist.path or blacklist.url)
filter_blacklist: true

# Remove PCR duplicates
remove_duplicates: true
dedup_method: "picard"  # Options: picard, samtools

# Keep BAM outputs (.bam/.bai)
keep_bam: false

# Samtools filtering flags
samtools_exclude_flags: 1804  # exclude unmapped, not primary, fails QC, duplicate

# Bedtools parameters for blacklist filtering
bedtools_nonamecheck: true  # Skip chromosome name checking

# Samples: multiple technical replicates (or lanes) under one sample
samples:
  sampleA:
    R1:
      - "raw/sampleA_L001_R1.fastq.gz"
      - "raw/sampleA_L002_R1.fastq.gz"

  sampleB:
    R1:
      - "raw/sampleB_R1.fastq.gz"

# For PE, add R2 list for each sample.

# fastp settings
fastp:
  # QC + Illumina adapter trimming + dedup
  dedup_adapter:
    enable: true
    dedup: true

# STAR settings
star:
  mapq_threshold: 255   # STAR unique mapper MAPQ is typically 255
  extra: "--outFilterMultimapNmax 1 --alignIntronMax 1"

# CAGEr clustering parameters
cager:
  min_count: 1
  max_dist: 20

# Output naming
output:
  dir: "results"

# Generate summary reports
generate_multiqc: true
